<!doctype html>
<html lang="ru">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Interview Analytics Agent Pro</title>
    <link rel="stylesheet" href="/ui/styles.css" />
  </head>
  <body>
    <div class="glow glow-a"></div>
    <div class="glow glow-b"></div>

    <header class="topbar">
      <div>
        <h1>Interview Analytics Agent Pro</h1>
        <p>Запись и аналитика встреч в одном контуре</p>
      </div>
      <div class="signal" id="apiSignal">API signal: ...</div>
    </header>

    <main class="grid">
      <section class="card">
        <h2>Доступ</h2>
        <label class="field">
          <span>API key</span>
          <input id="apiKey" type="password" placeholder="X-API-Key (optional in AUTH_MODE=none)" />
        </label>
      </section>

      <section class="card">
        <h2>Quick Recorder</h2>
        <label class="field">
          <span>URL встречи</span>
          <input id="meetingUrl" type="url" placeholder="https://..." />
        </label>
        <div class="row">
          <label class="field">
            <span>Длительность (сек)</span>
            <input id="durationSec" type="number" min="5" step="5" value="900" />
          </label>
          <label class="field">
            <span>Язык</span>
            <input id="language" type="text" value="ru" />
          </label>
        </div>
        <label class="field">
          <span>Устройство записи (optional)</span>
          <input id="inputDevice" type="text" placeholder="например: BlackHole 2ch" />
        </label>
        <div class="checks">
          <label><input id="transcribe" type="checkbox" /> Локальная транскрибация</label>
          <label><input id="uploadToAgent" type="checkbox" checked /> Отправить в pipeline</label>
          <label><input id="localReport" type="checkbox" checked /> Локальный report (JSON/TXT)</label>
          <label><input id="autoOpen" type="checkbox" /> Открывать URL автоматически</label>
        </div>
        <div class="row controls">
          <button id="quickStart" class="btn btn-main">Start</button>
          <button id="quickStop" class="btn" disabled>Stop</button>
          <span id="quickState" class="pill">idle</span>
        </div>
        <p id="quickMeta" class="meta">Нет активной записи.</p>
      </section>

      <section class="card card-wide">
        <h2>Встречи</h2>
        <div class="row controls">
          <button id="refreshMeetings" class="btn">Обновить</button>
          <span id="meetingsInfo" class="meta"></span>
        </div>
        <div class="table-wrap">
          <table>
            <thead>
              <tr>
                <th>meeting_id</th>
                <th>status</th>
                <th>created</th>
                <th>artifacts</th>
                <th></th>
              </tr>
            </thead>
            <tbody id="meetingsTable"></tbody>
          </table>
        </div>
      </section>

      <section class="card card-wide">
        <h2>Результат встречи</h2>
        <div class="row controls">
          <input id="meetingIdInput" type="text" placeholder="meeting_id" />
          <button id="loadMeeting" class="btn">Загрузить</button>
          <button id="loadScorecard" class="btn">Scorecard</button>
          <button id="rebuildArtifacts" class="btn">Rebuild artifacts</button>
          <button id="openReportJson" class="btn">Report JSON</button>
          <button id="openReportTxt" class="btn">Report TXT</button>
        </div>
        <label class="field">
          <span>Enhanced transcript</span>
          <textarea id="enhancedTranscript" rows="10" readonly></textarea>
        </label>
        <label class="field">
          <span>Report (JSON)</span>
          <textarea id="reportJson" rows="10" readonly></textarea>
        </label>
        <label class="field">
          <span>Scorecard (JSON)</span>
          <textarea id="scorecardJson" rows="10" readonly></textarea>
        </label>
      </section>

      <section class="card card-wide">
        <h2>Senior Compare & Manual Delivery</h2>
        <label class="field">
          <span>Meeting IDs для сравнения (через запятую)</span>
          <input id="comparisonMeetingIds" type="text" placeholder="m-1,m-2,m-3" />
        </label>
        <div class="row controls">
          <button id="runComparison" class="btn btn-main">Сравнить</button>
        </div>
        <label class="field">
          <span>Comparison report (JSON)</span>
          <textarea id="comparisonJson" rows="10" readonly></textarea>
        </label>

        <div class="row">
          <label class="field">
            <span>Sender account</span>
            <select id="senderAccount"></select>
          </label>
          <label class="field">
            <span>Recipients (comma-separated)</span>
            <input id="manualRecipients" type="text" placeholder="senior1@x.com,senior2@x.com" />
          </label>
        </div>
        <label class="field">
          <span>Сообщение (optional)</span>
          <textarea id="manualMessage" rows="4" placeholder="Короткий комментарий для сеньоров"></textarea>
        </label>
        <div class="row controls">
          <button id="manualSend" class="btn">Отправить вручную</button>
          <span id="manualSendState" class="pill">idle</span>
        </div>
        <p id="manualSendMeta" class="meta">Ручная отправка отключена до выбора встречи и получателей.</p>
      </section>
    </main>

    <script src="/ui/app.js"></script>
  </body>
</html>
